<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
 <!--  <link rel="stylesheet" href="https://fonts.googleapis.com/css?family=Poppins%26display=swap">
 -->   <link rel="stylesheet" href="style.css">
    <title>Smooth scroll from one page fixed</title>
</head>
<body>

    <menu>
        <ul class="menu-links">
            <li class="active"> <a href="#red">Red</a> </li>
            <li> <a href="#blue">Blue</a></li>  
            <li> <a href="#pink">Pink</a></li>  
            <li> <a href="#green">Green</a></li>  
            <li> <a href="#yellow">Yellow</a></li> 
        </ul> 
    </menu>
     
    <main>
            <section id="red">
                    <h1>Red</h1>
            </section>

            <section id="blue">
                    <h1>Blue</h1>
            </section>

            <section id="pink">
                    <h1>Pink</h1>
            </section>

            <section id="green">
                    <h1>Green</h1>
            </section>

            <section id="yellow">
                    <h1>Yellow</h1>
            </section>
    </main>

    <script 
        src="https://code.jquery.com/jquery-3.2.1.min.js">
    </script>

    <script type="text/javascript">

    /*  UNO (al refresh dello schermo ritorna a Home)
        $(document).ready(function(){
            $(this).scrollTop(0);
        });
    */

    /*  DUE (al refresh dello schermo ritorna a Home con un ritardo)
        $("html, body").animate({ scrollTop: "0" }, 1000);
    */

    /*  TRE (funziona come la DUE)  */
        $(document).ready(function(){
            $("html, body").animate({ scrollTop: "0" }, 1000);
        });
    /*------------------------------*/


    /*==== scroll al click ===*/
        $(function(){
            $(".menu-links a").on('click', function(){
                $("html, body").animate({
                   scrollTop: $($.attr(this, 'href')).offset().top
                }, 700);             
            });
        });

    /*=======*/
    

    /*==== spy su navbar al click ===*/
        let menuLinks = document.querySelectorAll('.menu-links li');        
        menuLinks.forEach (v=> {
            v.onclick = (()=> {
                setTimeout(()=> { 
                    menuLinks.forEach (j=> j.classList.remove('active'))
                    v.classList.add('active')
                    }, 100);
                console.log(v);
            })
            
        })

    /*=======*/

    
   /*==== spy su navbar allo scroll ===*/

	window.onscroll = (()=> {

	  let mainSection = document.querySelectorAll('main section');

	  mainSection.forEach((v,i)=> {

	    let rect = v.getBoundingClientRect().y;

	    if (rect < window.innerHeight-200) {
		menuLinks.forEach (v=> v.classList.remove('active'))
	       	menuLinks[i].classList.add('active')
	    }

	  })

	})

    /*=======*/

    </script>


</body>
</html>